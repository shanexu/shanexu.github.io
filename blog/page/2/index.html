
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Shane Xu's Home</title>
  <meta name="author" content="Shane Xu">

  
  <meta name="description" content="最近想在emacs里面调试ruby，搜到一篇博文说是安装ruby-debug和ruby-debug-extra，于是首先尝试安装ruby-debug 1
2
3
rvm use 1.9.3
gem search ruby-debug -r
gem install ruby-debug &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://shanexu.org/blog/page/2">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="Shane Xu's Home" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/lib/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  

</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">Shane Xu's Home</a></h1>
  
    <h2>Powered by Octopress Blog Framework</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:shanexu.org" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/03/29/an-zhuang-ruby-debug/">安装ruby-debug</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-03-29T11:56:00+08:00" pubdate data-updated="true">Mar 29<span>th</span>, 2013</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class="begin-indent2em"></div>


<p>最近想在emacs里面调试ruby，搜到一篇博文说是安装ruby-debug和ruby-debug-extra，于是首先尝试安装ruby-debug</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>rvm use 1.9.3
</span><span class='line'>gem search ruby-debug -r
</span><span class='line'>gem install ruby-debug</span></code></pre></td></tr></table></div></figure>


<p>然后找到<a href="http://rubyforge.org/docman/view.php/8883/10451/ruby-debug.html">ruby-debug</a>的官方文档，然后自己胡乱写了个脚本开始对着文档调试，然后就是rdebug抛错。之后发现竟然还有一个ruby-debug19的包。然后又安装ruby-debug19。尝试运行rdebug，还是出错。没辙拿着错误信息直接上google，终于在<a href="http://stackoverflow.com/questions/8378277/cannot-use-ruby-debug19-with-1-9-3-p0">stackoverflow</a>找到答案。貌似答案的出处在这里<a href="http://blog.wyeworks.com/2011/11/1/ruby-1-9-3-and-ruby-debug/">http://blog.wyeworks.com/2011/11/1/ruby-1-9-3-and-ruby-debug/</a>
首先需要从<a href="http://rubyforge.org/frs/?group_id=8883">http://rubyforge.org/frs/?group_id=8883</a>下载</p>

<ol>
<li>linecache19-0.5.13.gem</li>
<li>ruby_core_source-0.1.5.gem</li>
<li>ruby-debug19-0.11.6.gem</li>
<li>ruby-debug-base19-0.11.26.gem</li>
</ol>


<p>然后用下面的命令安装：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>which ruby
</span><span class='line'>export RVM_SRC=/Users/shane/.rvm/src/ruby-1.9.3-p392
</span><span class='line'>gem install archive-tar-minitar
</span><span class='line'>gem install ruby_core_source-0.1.5.gem -- --with-ruby-include=$RVM_SRC
</span><span class='line'>gem install linecache19-0.5.13.gem -- --with-ruby-include=$RVM_SRC
</span><span class='line'>gem install ruby-debug-base19-0.11.26.gem -- --with-ruby-include=$RVM_SRC
</span><span class='line'>gem install ruby-debug19-0.11.6.gem -- --with-ruby-include=$RVM_SRC</span></code></pre></td></tr></table></div></figure>


<p>结果后来在安装rdebug for emacs的时候看到了一个gem， <a href="https://github.com/cldwalker/debugger">debugger</a>，感觉这个包比较好。</p>

<blockquote><p>A fork of ruby-debug(19) that works on 1.9.2 and 1.9.3 and installs easily for rvm/rbenv rubies.</p></blockquote>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>gem install debugger</span></code></pre></td></tr></table></div></figure>


<p>然后在emacs里面用el-get安装rdebug就好了。</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/03/26/mian-zhao-da-hai-%2Cchun-nuan-hua-kai/">面朝大海，春暖花开</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-03-26T00:39:00+08:00" pubdate data-updated="true">Mar 26<span>th</span>, 2013</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class="begin-indent2em"></div>


<p>今天是海子的忌日。</p>

<blockquote><p>从明天起，做一个幸福的人<br/>喂马，劈柴，周游世界<br/>从明天起，关心粮食和蔬菜<br/>我有一所房子，面朝大海，春暖花开</p><p>从明天起，和每一个亲人通信<br/>告诉他们我的幸福<br/>那幸福的闪电告诉我的<br/>我将告诉每一个人</p><p>给每一条河每一座山取一个温暖的名字<br/>陌生人，我也为你祝福<br/>愿你有一个灿烂的前程<br/>愿你有情人终成眷属<br/>愿你在尘世获的幸福<br/>我也愿面朝大海，春暖花开</p></blockquote>


<p>曾经看到一篇文章说作者在美国教授学生孩子的这首诗，在谈及诗人海子的生平的时候，学生都非常无法理解能够写下如此充满生机的诗篇的诗人会选择卧轨这种极端的方式结束自己的生命。</p>

<p>我一向是非常向往这个诗人，但是往往向往的事物是最遥不可及的。我没有很系统的去读海子的作品，买过一本薄薄的诗集，只看看寥寥几篇，“姐姐，今夜我在德令，夜色笼罩”，“说声分手吧，分开编过少女秀发的十指，秀发如五月的麦苗，曾轻轻含在嘴里”，还有一本如字典般的全集，这本书则是几乎一页都未曾翻动过。</p>

<p>现在的我确实是比平日更加多愁善感，仿佛眼前已经看不到任何希望了，每天浑浑噩噩的度日，昼夜颠倒，三餐不济，说不准哪天我真的会随之诗人乘风而去了，曾经有人说我，“我总觉得你有诗人的气质”，我是太过犹豫，太过悲观，太过感伤，或许我只是对许许多多的事物失去了兴趣，又或许我已经对许许多多的事物失去了希望，我不知道接下来的日子该怎么过下去了。我现在好害怕和妈妈打电话，我真的不知道该怎么说，我甚至觉得我自己已经单纯的不想去做那些事情了，我已经厌倦了这样的生活。</p>

<p>好吧，最后还是引用海子的诗句。</p>

<blockquote><p>大风从东吹到西，从北刮到南，无视黑夜和黎明。你所说的曙光究竟是什么意思。</p></blockquote>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/03/17/wo-yi-jing-bu-zai-ai-ni/">我已经不再爱你</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-03-17T01:43:00+08:00" pubdate data-updated="true">Mar 17<span>th</span>, 2013</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='begin-indent2em'></div>


<p>没想到改一个appleId帐号密码，需要在三个设备上来回反复重复地输入密码。我的人生是该有一个新的开始了。我蜷缩在家了多时，我蜷缩在床上整日地抱着笔记本，我假装自己投入地写自己的博客，我假装为了实现一个效果废寝忘食。然而我如此费尽心机筑造的高墙却因为某人的几句话彻底崩溃。</p>

<p>这世界真心好笑。我花了这么多的时间，这么多的金钱，这么多的精力，却连一点点小小的认可都换不来。所以在经历了这样的事情之后，我终于看清了自己，我已经不再对一些事情抱有希冀，这世界上的有些东西就如同命中注定一般有些人是无法得到的。</p>

<p>我保持＂秒速5厘米＂的状态已经快两个月了，我心里是有一点恐慌的。说到秒速5厘米这货我反复看了好多遍，说到有什么电影一定要和某个人看的话，便只有这电影了，而事实我也这么做了，在离开的前一天晚上么？记忆已经开始模糊了，这是好事吗？</p>

<p>2013年3月16日，我从你那里得知了一些对于我来说无关紧要的事情，我狠狠地咬牙，我决定我已经不爱你了。</p>

<p>最后的最后，让我引用夏川真凉的话。</p>

<blockquote><p>一边嘀咕着空洞的求爱词句，一边把动物的尸体和卵，植物的种子、叶子和根部，碾碎塞进嘴里，你不觉得这正好表现出了恋爱这种行为的卑贱吗？</p></blockquote>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/03/13/selecting-html-comments-with-jquery/">Selecting HTML Comments With jQuery</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-03-13T12:40:00+08:00" pubdate data-updated="true">Mar 13<span>th</span>, 2013</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='begin-indent2em' filter='p:not(:has(a.fancybox :first-child))'></div>


<p>前几日想在博客blogs列表上上做一个read more &amp; less的效果，几经周折，总算做了一个比较满意的版本。其实原理很简单只是细节问题接踵而至。octopress中有<em>&lt;!&minus;&minus; more &minus;&minus;&gt;</em>这个注释把文章分成两截，其实在执行<em>Read more</em>的时候只要从文章中找到<em>&lt;!&minus;&minus; more &minus;&minus;&gt;</em>注释并截取下半截，并添加到原来的“.entry-content div”中即可。一开始也没有多想，在我看来jQuery应该是没有选取注释的选择器的，的确最后证明我的想法的确是正确的。于是又用了在文档中添加display为none的元素的方法。于是我就是在<em>&lt;!&minus;&minus; more &minus;&minus;&gt;</em>的后面增加了一个<em>&lt;div class=&#8217;read-more-mark&#8217;&gt;&lt;/div&gt;</em>这样的标记性元素。于是要选取后半截只要这样就行了。</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="nx">$</span><span class="p">(</span><span class="s1">&#39;.read-more-mark&#39;</span><span class="p">).</span><span class="nx">nextAll</span><span class="p">();</span>
</span></code></pre></td></tr></table></div></figure>




</div>
  
  
    <footer>
      <a rel="full-article" href="/blog/2013/03/13/selecting-html-comments-with-jquery/">Read on &rarr;</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/03/11/emacs-24-dot-3fa-bu/">Emacs 24.3发布</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-03-11T09:27:00+08:00" pubdate data-updated="true">Mar 11<span>th</span>, 2013</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='begin-indent2em' filter='p:not(:has(a.fancybox :first-child))'></div>


<p>首先恭喜一下Emacs 24.3发布。于是抽空把自己的emacs更新了下。</p>

<blockquote><p><strong>The current stable release is 24.3</strong>. To obtain it, visit the <a href="http://www.gnu.org/software/emacs/#Obtaining">obtaining</a> section.</p>

<p>Emacs 24 has a wide variety of new features, including:</p>

<ul>
<li>A packaging system and interface (M-x list-packages) for downloading and installing extensions. A default package archive is hosted by GNU and maintained by the Emacs developers.</li>
<li>Support for displaying and editing bidirectional text, including right-to-left scripts such as Arabic and Hebrew.</li>
<li>Support for lexical scoping in Emacs Lisp.</li>
<li>Improvements to the Custom Themes system (M-x customize-themes).</li>
<li>Unified and improved completion system in many modes and packages.</li>
<li>Built-in support for <a href="http://www.gnu.org/software/gnutls/">GnuTLS</a>, <a href="http://www.gtk.org/">GTK+ 3</a>, <a href="http://www.imagemagick.org/script/index.php">ImageMagick</a>, <a href="http://selinuxproject.org/page/Main_Page">SELinux</a>, and <a href="http://www.xmlsoft.org/">Libxml2</a>.</li>
</ul>


<p>For more information, read the <a href="http://www.gnu.org/software/emacs/NEWS.24.3">News</a> file.</p></blockquote>

</div>
  
  
    <footer>
      <a rel="full-article" href="/blog/2013/03/11/emacs-24-dot-3fa-bu/">Read on &rarr;</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/03/10/xin-de-kai-shi-%3F/">新的开始？</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-03-10T22:18:00+08:00" pubdate data-updated="true">Mar 10<span>th</span>, 2013</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='begin-indent2em'></div>


<p>终于要从纵我放逐的一个月的生活中走出来了吗？回想一下这一个多月的生活补了无数的番，补完了Criminal Minds第七季，并且追上了第八季的进度，复习了第一季，然后看了三四本技术书，回顾了半本国境以南太阳以西，在最后的一星期里，注册了一个域名，开了自己的博客。其实好像我做了好多事情，就好像要弥补过去一年里所失去的一样。为了某些事情，我丢掉了好多东西，我没有时间做自己喜欢的事情，只是一味的顺从，时不时我会仰头叹息几声，然后笑脸相迎，我真觉得自己好贱。</p>

<p>然后，在失去了一切之后，我甚至在没有找好下家的情况下毅然决然地辞职了，我只是想换一个工作环境，我只是这样告诉自己。然而，我自己知道，我已经厌倦这样的生活了。一个陷入僵局的生活。</p>

<p>“和你在一起，我哪里都到达不了！”寻羊冒险记里让我感触最深地话。在我从她的家（那里曾是我们的家）里离开的那天我告诉了我曾经在那书里读到的那句话。她说，是啊，和你在一起我哪里都到达不了。</p>

<p>好吧，我终于要从一个多月的无业游民状态解脱了，可是还是有点不舍。我不愿太快答复offer也是出于这个原因。我不想上班，我不想工作，我不想努力，我想放任自由。</p>

<p>然而一切的一切明天开始改变。这会是一个新的开始吗？还是又一轮的无奈。</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/03/08/mobile-safari-automatically-scales-text/">Mobile Safari Automatically Scales Text</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-03-08T22:13:00+08:00" pubdate data-updated="true">Mar 8<span>th</span>, 2013</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='begin-indent2em' filter='p:not(:has(a.fancybox :first-child))'></div>


<p>今天用iPhone浏览昨天写的<a href="/blog/2013/03/07/guan-yu-shou-xing-suo-jin/"><em>关于首行缩进</em></a>的日志的时候发现代码引用部分字体出现莫名其妙的放大现象，导致效果很不好。以为是最近老是换iPhone的字体所致，于是就打开了xcode的iPhone模拟器，一来可以看看模拟器上是不是出现这样的现象，二来也可以顺便调戏一下模拟器上的Mobile Safari。</p>

<p>结果模拟器上的Mobile Safari也出现了这样的现象。于是打开Safari调戏Mobile Safari。发现从code标签开始到最深处的span之前的那一层的font-size的计算值都是好的，直到最后一层的时候就莫名其妙的变大了。即便我在最后一层的span上设置了font-size的大小也无济于事，总之，折腾了半天，也没有个结果。无奈之下只能求助于google。</p>

<p><img src="http://fileserver.cloudfoundry.com/images/mobile_safari-1.png" title="#1" alt="Mobile Safari automatically scales text"></p>

</div>
  
  
    <footer>
      <a rel="full-article" href="/blog/2013/03/08/mobile-safari-automatically-scales-text/">Read on &rarr;</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/03/08/wo-zhi-dao-by-by2/">我知道 by By2</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-03-08T00:34:00+08:00" pubdate data-updated="true">Mar 8<span>th</span>, 2013</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='begin-indent2em'></div>


<p>好吧，我知道我自己这几天已经百无聊赖到了一定程度了。从墙外把好多年前的写的东西运回来的时候发现了一句很莫名其妙的歌词，</p>

<blockquote><p>我知道你还是爱着我 虽然 分开的理由 我们都已接受&#8230;&#8230;</p></blockquote>

<div class='end-indent2em'></div>


<p>而我已经完完全全忘记了曾经反复单曲循环的歌的。果然我是一个记不住歌词的人。</p>

<iframe height=498 width=510 frameborder=0 src="http://player.youku.com/embed/XODM5ODMxOTY=" allowfullscreen></iframe>



</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/03/07/guan-yu-shou-xing-suo-jin/">关于首行缩进</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-03-07T10:24:00+08:00" pubdate data-updated="true">Mar 7<span>th</span>, 2013</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class="begin-indent2em"></div>


<p>最近在把以前写的小说搬到了这个地方。有件事情让我有些苦恼，原来没有首行缩进的中文文本是非常难看的东西。我想最直接方式就是给每个p标签加上一段style。</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'><span class="nt">&lt;p</span> <span class="na">style=</span><span class="s">&quot;text-indent: 2em;&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>    接下来的日子与琳琅失去联络。于是只好用回忆来消磨时光。
</span><span class='line'>    可回忆却像是嚼久了的口香糖，越嚼越硬，最后竟硌伤了我自己。
</span><span class='line'>    琳琅终究还是从未喜欢过我。
</span><span class='line'><span class="nt">&lt;/p&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>然后把这段style放在css中。</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='css'><span class='line'><span class="nc">.indent2em</span> <span class="p">{</span>
</span><span class='line'>    <span class="k">text-indent</span><span class="o">:</span> <span class="m">2em</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>然而octopress的post文档是从markdown文件生成的。markdown文本生成html时候并不能给生成的tag加上class等属性，要么使用html混排的方式把class写进tag中，但是这样一来就完全失去了使用markdown编写post的优势了，还不如整个去写一个html文档算了。所以要么把格式直接写在p标签里。比如这样，修改<a href="https://github.com/tommy351/Octopress-Theme-Slash">slash</a>主题的_post.scss文件。</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='scss'><span class='line'><span class="nc">.post</span><span class="p">{</span>
</span><span class='line'>    <span class="nt">h2</span><span class="nc">.title</span><span class="o">,</span> <span class="nc">.entry-content</span><span class="p">{</span>
</span><span class='line'>        <span class="nt">p</span><span class="p">{</span>
</span><span class='line'>            <span class="na">text-indent</span><span class="o">:</span> <span class="mi">2</span><span class="kt">em</span><span class="p">;</span>
</span><span class='line'>        <span class="p">}</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>但是这样势必造成所有的p标签都首行缩进，而且也只有对p标签起到作用。其实归根到底，我想要的效果就是只在需要缩进的地方缩进。既然markdown没有提供加入class的办法，那就只能靠javascript。</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="nx">$</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
</span><span class='line'>    <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;a[href=&quot;the-path-of-blog&quot;]:eq(0)&#39;</span><span class="p">)</span>
</span><span class='line'>        <span class="p">.</span><span class="nx">parent</span><span class="p">().</span><span class="nx">next</span><span class="p">().</span><span class="nx">find</span><span class="p">(</span><span class="s1">&#39;&gt;p&#39;</span><span class="p">)</span>
</span><span class='line'>        <span class="p">.</span><span class="nx">addClass</span><span class="p">(</span><span class="s1">&#39;indent2em&#39;</span><span class="p">).</span><span class="nx">length</span>
</span><span class='line'>        <span class="o">||</span> <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;.entry-content &gt; p&#39;</span><span class="p">).</span><span class="nx">addClass</span><span class="p">(</span><span class="s1">&#39;indent2em&#39;</span><span class="p">);</span>
</span><span class='line'><span class="p">});</span>
</span></code></pre></td></tr></table></div></figure>


<p>把这段放在<em>&lt;!&minus;&minus; more &minus;&minus;&gt;</em>之前，这样折叠之前的内容和折叠之后的内容都会有首行缩进的样式。这样还是有问题，不仅每次都要把这么一段代码放到文档中，同时段落的缩进还是很难控制，当然可以通过修改javascript代码来做到。还有一个麻烦的地方是每次都要把当前的博文的地址放到<em>“the-path-of-blog”</em>中去。好吧既然每张需要首行缩进的页面都要加上一段javascript代码那么干脆把代码放到单独的js文件去吧。
首先我们加三个css类。</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class='scss'><span class='line'><span class="nc">.indent2em</span><span class="p">{</span>
</span><span class='line'>    <span class="na">text-indent</span><span class="o">:</span> <span class="mi">2</span><span class="kt">em</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'><span class="nc">.begin-indent2em</span><span class="p">{</span>
</span><span class='line'>    <span class="na">display</span><span class="o">:</span> <span class="no">none</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'><span class="nc">.end-indent2em</span><span class="p">{</span>
</span><span class='line'>    <span class="na">display</span><span class="o">:</span> <span class="no">none</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>第一个自不必说了，<em>begin-indent2em</em>和<em>end-indent2em</em>则用来分别标出开始和结束首行缩进的位置。这样就能在行文中自如的控制缩进格式了。</p>

<p>接着加入一段javascript。</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">$</span><span class="p">){</span>
</span><span class='line'>    <span class="kd">var</span> <span class="nx">addIndent2em</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(){</span>
</span><span class='line'>        <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;.begin-indent2em&#39;</span><span class="p">).</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">index</span><span class="p">,</span> <span class="nx">ele</span><span class="p">){</span>
</span><span class='line'>            <span class="kd">var</span> <span class="nx">qele</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="nx">ele</span><span class="p">);</span>
</span><span class='line'>            <span class="nx">qele</span><span class="p">.</span><span class="nx">nextUntil</span><span class="p">(</span><span class="s1">&#39;.end-indent2em&#39;</span><span class="p">,</span> <span class="nx">qele</span><span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s1">&#39;filter&#39;</span><span class="p">)</span><span class="o">||</span><span class="s1">&#39;p&#39;</span><span class="p">).</span><span class="nx">addClass</span><span class="p">(</span><span class="s1">&#39;indent2em&#39;</span><span class="p">);</span>
</span><span class='line'>        <span class="p">});</span>
</span><span class='line'>    <span class="p">};</span>
</span><span class='line'>    <span class="nx">addIndent2em</span><span class="p">();</span>
</span><span class='line'><span class="p">})(</span><span class="nx">jQuery</span><span class="p">);</span>
</span></code></pre></td></tr></table></div></figure>


<p>来看一下怎么用吧。下面这段文字来自我非常喜欢的一本书<a href="http://book.douban.com/subject/1794620/">芒果街上的小屋</a>，这是<em>头发（hair）</em>这一章的中英文对照。中文需要首行缩进，而英文不要。于是在markdown代码中加入了两个不占用空间的<em>div</em>风别标识需要开始和结束缩进的位置。而<em>begin div</em>的<em>filter</em>属性中可以加入过滤选择器，默认的时候只选择<em>p</em>标签。这样就能较为自由的控制缩进格式了。而实际效果也还可以，除了某些时候。</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'><span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&#39;begin-indent2em&#39;</span> <span class="na">filter=</span><span class="s">&#39;p, block&#39;</span><span class="nt">&gt;&lt;/div&gt;</span>
</span><span class='line'>我们家里每个人的头发都不一样。爸爸的头发像扫把，根根直立往上插。而我，我的投放挺懒惰。它从来不听发夹和发带的话。卡洛斯的头发又直又厚。他不用梳头。蕾妮的头发滑滑的——会从你手里溜走。还有奇奇，他最小，茸茸的头发像毛皮。
</span><span class='line'>
</span><span class='line'>只有妈妈的头发，妈妈的头发，好像一朵朵小小的玫瑰花结，一枚枚小小的糖果圈儿，圈都那么拳曲，那么漂亮，因为她成天给它们上发卷。把鼻子伸进去闻一闻吧，当她搂着你时。当她搂着你时，你觉得那么安全，闻到的气味那么香甜。是那种待烤的面包的暖暖的香味，是那种她给你让出一角被窝时，和着体温散发的芬芳。你睡在她的身旁，外面下着雨，爸爸打着鼾。哦，鼾声、雨声，还有妈妈吗那闻起来像面包的头发。
</span><span class='line'>
</span><span class='line'><span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&#39;end-indent2em&#39;</span><span class="nt">&gt;&lt;/div&gt;</span>
</span><span class='line'>Everybody in our family has different hair. My Papa’s hair is like a broom, all up in the air. And me, my hair is lazy. It never obeys barrettes or bands. Carlos’s hair is thick and straight. He doesn’t need to comb it. Nenny’s hair is slippery -- slides out of  your hand. And Kiki, who is the youngest, has hair like fur.
</span><span class='line'>
</span><span class='line'>But my mother’s hair, my mother’s hair, like little rosettes, like little candy circles all curly and pretty because she pinned it in pincurls all day, sweet to put your nose into when she is holding you, holding you and you feel safe, is the warm smell of bread before you bake it, is the smell when she makes room for you on her side of the bed still warm with her skin, and you sleep near her, the rain outside falling and Papa snoring. The snoring, the rain outside falling and Papa snoring. The snoring, the rain, and Mama’s hair that smells like bread.
</span></code></pre></td></tr></table></div></figure>



</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/03/06/emacs-mac-port/">Emacs-mac-port</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-03-06T10:47:00+08:00" pubdate data-updated="true">Mar 6<span>th</span>, 2013</time>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='begin-indent2em'></div>


<p>把工作环境迁移到OS X下面已经是几个月前的事情了，说实话一开始真的很难适应奇怪的OS X系统。比如奇怪的窗口管理器行为，没有双击标题栏最大化，即便是点击了窗口的最大化按钮（我现在还是不知道这个按钮的确是叫这个名字的，反正就是那个绿色的按钮）的行为也是非常的暧昧，还有Dock上的图标竟然不具备最小化窗口的功能（Yes, I&#8217;m a long-term PC user.）。</p>

<p>况且在此之前我一直用着xmonad和shellshape这样的平铺窗口管理器。如今OS X下还要手动调节窗口大小，这诚然是梦魇啊。后来我安装了SizeUp之后我所有的窗口基本上就只有两个模式了——普通大小和最大化。然后用Command-Tab切换窗口。也就将就着用了。其实在我妥协之前我还在我的mac上装了Archlinux但是最后还是放弃了。我发现我已经懒于配置一个系统了。</p>

<p>切入正题吧。工作环境切换到OS X之后还有一些比较不习惯的事情就是emacs，尝试的装了homebrew和macports下的emacs，但是总有一些不太对的地方。最后终于在某一天查看emacs的mailing list的时候发现了<a href="https://github.com/railwaycat/emacs-mac-port">emacs mac port</a> by Yamamoto Mitsuharu。以下是我的安装过程。</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>git clone https://github.com/railwaycat/emacs-mac-port.git
</span><span class='line'>cd emacs-mac-port
</span><span class='line'>cp mac/Emacs.app/Contents/Resources/Emacs.icns.official mac/Emacs.app/Contents/Resources/Emacs.icns #我比较喜欢原版的图标
</span><span class='line'>./configure --with-mac --enable-mac-app --prefix=/opt/local
</span><span class='line'>make
</span><span class='line'>sudo make install</span></code></pre></td></tr></table></div></figure>

</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/blog/page/3/">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
    <a class="next" href="/">Newer &rarr;</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2013/04/29/macbook-fn-key-and-linux/">macbook fn key and Linux</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/04/24/zuo-yi-tian-de-ni/">做一天的你</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/04/13/ci-yu-wo-wang-guan-%2Cgei-yu-wo-shi-lian/">赐予我王冠，给予我试炼</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/04/12/tranquil-mode/">tranquil-mode</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/04/09/its-because-of-you/">It&#8217;s because of you, motherfucker, that we are not all using Lisp.</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  
  <a href="https://github.com/shanexu">@shanexu</a> on GitHub
  
  <script type="text/javascript">
    $(document).ready(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'shanexu',
            count: 0,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>





  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2013 - Shane Xu -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
